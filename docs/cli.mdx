---
title: CLI Reference
description: Complete reference for IceType command-line interface tools.
---

# CLI Reference

The IceType CLI (`ice`) provides tools for schema validation, type generation, and Iceberg export.

## Installation

The CLI is included when you install the `icetype` package:

```bash
npm install icetype
# or
pnpm add icetype
```

## Running the CLI

### With JavaScript/JSON Schemas

For `.js`, `.mjs`, or `.json` schema files:

```bash
npx ice <command> [options]
```

### With TypeScript Schemas

TypeScript schema files require a TypeScript runtime:

```bash
# Option 1: Use tsx (recommended)
npx tsx node_modules/.bin/ice <command> --schema ./schema.ts

# Option 2: Compile to JavaScript first
npx tsc schema.ts
npx ice <command> --schema ./schema.js
```

## Commands

### `ice init`

Initialize a new IceType project with a template schema file.

```bash
ice init [options]
```

**Options:**

| Option | Alias | Description |
|--------|-------|-------------|
| `--dir <path>` | `-d` | Directory to initialize (default: current directory) |
| `--force` | `-f` | Overwrite existing files |

**Examples:**

```bash
# Initialize in current directory
ice init

# Initialize in a specific directory
ice init --dir ./my-project

# Force overwrite existing files
ice init --force
```

**Output:**

Creates a `schema.ts` template file:

```typescript
import { parseSchema } from 'icetype';

export const ExampleSchema = parseSchema({
  $type: 'Example',
  $partitionBy: ['tenantId'],
  $index: [['createdAt']],

  id: 'uuid!',
  name: 'string',
  tenantId: 'string!',
  createdAt: 'timestamp',
});
```

---

### `ice generate`

Generate TypeScript type definitions from a schema.

```bash
ice generate --schema <path> --output <path>
```

**Options:**

| Option | Alias | Description | Required |
|--------|-------|-------------|----------|
| `--schema <path>` | `-s` | Path to schema file | Yes |
| `--output <path>` | `-o` | Output path for generated types | Yes |

**Examples:**

```bash
# Generate types from JavaScript schema
ice generate --schema ./schema.js --output ./types.ts

# Short form
ice generate -s ./schema.js -o ./types.ts

# With TypeScript schema (using tsx)
npx tsx node_modules/.bin/ice generate -s ./schema.ts -o ./types.ts
```

**Input Schema:**

```typescript
export const UserSchema = parseSchema({
  $type: 'User',
  id: 'uuid!',
  email: 'string#',
  name: 'string',
  age: 'int?',
  isActive: 'bool = true',
});
```

**Output Types:**

```typescript
/**
 * Generated by IceType
 */

export interface User {
  id: string;
  email: string;
  name: string;
  age?: number;
  isActive: boolean;
}
```

---

### `ice validate`

Validate a schema file for syntax errors and inconsistencies.

```bash
ice validate --schema <path>
```

**Options:**

| Option | Alias | Description | Required |
|--------|-------|-------------|----------|
| `--schema <path>` | `-s` | Path to schema file | Yes |

**Examples:**

```bash
# Validate a JavaScript schema
ice validate --schema ./schema.js

# Short form
ice validate -s ./schema.js

# With TypeScript schema
npx tsx node_modules/.bin/ice validate -s ./schema.ts
```

**Output (valid schema):**

```
Schema is valid.
```

**Output (invalid schema):**

```
Schema validation failed:
  - Field 'email': Invalid type 'strin' (did you mean 'string'?)
  - Directive '$partitionBy': Referenced field 'tenant_id' not found
```

---

### `ice iceberg export`

Export a schema to Apache Iceberg table metadata format.

```bash
ice iceberg export --schema <path> --output <path> [options]
```

**Options:**

| Option | Alias | Description | Required |
|--------|-------|-------------|----------|
| `--schema <path>` | `-s` | Path to schema file | Yes |
| `--output <path>` | `-o` | Output path for metadata JSON | Yes |
| `--location <url>` | `-l` | Table location URL | No |

**Examples:**

```bash
# Export to Iceberg metadata
ice iceberg export --schema ./schema.js --output ./metadata.json

# With table location
ice iceberg export -s ./schema.js -o ./metadata.json --location s3://bucket/tables/users

# With TypeScript schema
npx tsx node_modules/.bin/ice iceberg export -s ./schema.ts -o ./metadata.json -l s3://bucket/table
```

**Output:**

Generates an Iceberg v2 metadata file:

```json
{
  "format-version": 2,
  "table-uuid": "generated-uuid",
  "location": "s3://bucket/tables/users",
  "schema": {
    "type": "struct",
    "schema-id": 0,
    "fields": [
      { "id": 1, "name": "id", "type": "string", "required": true },
      { "id": 2, "name": "email", "type": "string", "required": true },
      { "id": 3, "name": "name", "type": "string", "required": true }
    ]
  },
  "partition-spec": [...],
  "sort-order": {...},
  "properties": {...}
}
```

## Supported Schema File Formats

| Extension | Description | Notes |
|-----------|-------------|-------|
| `.ts` | TypeScript | Requires `tsx` or pre-compilation |
| `.js`, `.mjs` | JavaScript (ESM) | Native support |
| `.json` | JSON | Native support |

## Exit Codes

| Code | Description |
|------|-------------|
| `0` | Success |
| `1` | Error (invalid arguments, schema errors, etc.) |

## Environment Variables

| Variable | Description |
|----------|-------------|
| `ICETYPE_DEBUG` | Enable debug output when set to `1` |

## Tips

### Using with npm scripts

Add CLI commands to your `package.json`:

```json
{
  "scripts": {
    "schema:validate": "tsx node_modules/.bin/ice validate -s ./schema.ts",
    "schema:generate": "tsx node_modules/.bin/ice generate -s ./schema.ts -o ./types.ts",
    "schema:export": "tsx node_modules/.bin/ice iceberg export -s ./schema.ts -o ./metadata.json"
  }
}
```

### CI/CD Integration

```yaml
# GitHub Actions example
- name: Validate Schema
  run: npx tsx node_modules/.bin/ice validate -s ./schema.ts

- name: Generate Types
  run: npx tsx node_modules/.bin/ice generate -s ./schema.ts -o ./generated/types.ts
```
